
<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Bare - Start Bootstrap Template</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="vendor/css/style.css" rel="stylesheet" />

    <!-- Custom styles for this template -->
    <style>
      body {
        padding-top: 54px;
		background-image:none;
      }
      @media (min-width: 992px) {
        body {
          padding-top: 56px;
        }
      }

    </style>

  </head>

  <body>

<!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
	  <a href="main.html"><img src="img/img-back.png" style="width:25px;"></a>
        <a class="navbar-brand" href="#">Give Loan</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="main.html">Home
                <span class="sr-only"></span>
              </a>
            </li>
 <li class="nav-item active">
              <a class="nav-link" href="mycard.html">My card
                <span class="sr-only"></span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html">Logout</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Page Content -->
    <div class="container">

	  <div class="row" style="background-color: #ffffff; padding-top:20px; padding-bottom:20px;">
		<div class="col-lg-12 text-center">
			<div id="slidecontainer">
			<span class="bigTitleGray">Loan amount</span>
			<div class="rowRectangle">
					<span class="titleGray" style="float:left;">100 €</span>
					<span class="titleGray" style="float:right;">1000 €</span>
			</div>
			  <input  type="range" min="100" step="50" max="1000" value="550" class="slider" id="amountRange">
				<center><span class="priceRed"><span id="selectedPrice">550</span> €</span></center>
			<hr />
			<span class="bigTitleGray">Credit Score</span>
				<span class="titleGray" style="display:inline-block;">From:</span>
				<select class="select" id="creditScoreFrom" style="display:inline-block; border:0px solid #9b1435; margin-left:5px;">
					<option value="6">6</option>
					<option value="7">7</option>
					<option value="8">8</option>
					<option value="9">9</option>
					<option value="10">10</option>
				</select>
				<span class="titleGray" style="display:inline-block; margin-left:10px;">To:</span>
				<select class="select" id="creditScoreTo" style="display:inline-block; border:0px solid #9b1435; margin-left:5px;">
					<option value="6">6</option>
					<option value="7">7</option>
					<option value="8">8</option>
					<option value="9">9</option>
					<option value="10">10</option>
				</select>
			<hr />
			<span class="bigTitleGray">Timeline</span>
			<div class="rowRectangle">
					<span class="titleGray" style="float:left;">6 months</span>
					<span class="titleGray" style="float:right;">12 months</span>
			</div>
			  <input  type="range" min="6" step="1" max="12" value="9" class="slider" id="monthRange">
				<center><span class="priceRed"><span id="selectedMonth">9</span> m</span></center>
			
			<hr />			
			<span class="bigTitleGray"><input type="checkbox" id="cbEnsure" /> Ensure the loan <span style="float:right;" class="redColor">20€</span></span>
			<span class="redColor" style="text-align:left; float:left;">We recomend taking an insurance.</span>
			</div>
			
		</div>
		</div>
		<div class="row">
			<div class="col-lg-12" style="padding:0px;">
				<div style=" background-color:#f0f0f0; padding-top:20px; padding-bottom:20px;">
			<div class="rowRectangle" style="width:80%; margin:0 auto;">
					<span style="float:left;">
						<select class="select" id="percentReturn" style="display:inline-block; border:0px solid #9b1435; margin-left:5px;">
							<option value="6">6</option>
							<option value="7">7</option>
							<option value="8" selected>8</option>
							<option value="9">9</option>
							<option value="10">10</option>
						</select>
						<span class="titleGray" style="display:inline-block;">% return</span>
					</span>
					<span style="float:right;"><span class="priceRed"><span id="returnAmount">-</span> €</span></span>
			</div>
			<a onclick="sendToApi()" class="btnPurple" style="margin-top:20px; text-align:center; color:#FFFFFF;">SET ORDER</a>
			</div>
			</div>
		</div>
    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script>
calculateReturn();
$('#amountRange').on('input', function () {
	$("#selectedPrice").text($('#amountRange').val());
	calculateReturn();
});
$('#monthRange').on('input', function () {
	$("#selectedMonth").text($('#monthRange').val());
});

$("#creditScoreFrom").on("change", function(){
	getPercentFromCreditScore($("#creditScoreFrom").val());
	calculateReturn();
});

$("#percentReturn").on("change", function(){
	calculateReturn();
});

$("#cbEnsure").on("change", function(){
	calculateReturn();
});

function getPercentFromCreditScore(percent){
	if(percent == "6"){
		$("#percentReturn").html("");
		$("#percentReturn").append("<option value'6' >6</option>");
		$("#percentReturn").append("<option value'7' >7</option>");
		$("#percentReturn").append("<option value'8' selected>8</option>");
		$("#percentReturn").append("<option value'9' >9</option>");
		$("#percentReturn").append("<option value'10'>10</option>");
	}
	if(percent == "7"){
		$("#percentReturn").html("");
		$("#percentReturn").append("<option value'5' >5</option>");
		$("#percentReturn").append("<option value'6' >6</option>");
		$("#percentReturn").append("<option value'7' selected>7</option>");
		$("#percentReturn").append("<option value'8' >8</option>");
		$("#percentReturn").append("<option value'9'>9</option>");
	}
	if(percent == "8"){
		$("#percentReturn").html("");
		$("#percentReturn").append("<option value'4' >4</option>");
		$("#percentReturn").append("<option value'5' >5</option>");
		$("#percentReturn").append("<option value'6' selected>6</option>");
		$("#percentReturn").append("<option value'7' >7</option>");
		$("#percentReturn").append("<option value'8'>8</option>");
	}
	if(percent == "9"){
		$("#percentReturn").html("");
		$("#percentReturn").append("<option value'3' >3</option>");
		$("#percentReturn").append("<option value'4' >4</option>");
		$("#percentReturn").append("<option value'5' selected>5</option>");
		$("#percentReturn").append("<option value'6' >6</option>");
		$("#percentReturn").append("<option value'7'>7</option>");
	}
	if(percent == "10"){
		$("#percentReturn").html("");
		$("#percentReturn").append("<option value'2' >2</option>");
		$("#percentReturn").append("<option value'3' >3</option>");
		$("#percentReturn").append("<option value'4' selected>4</option>");
		$("#percentReturn").append("<option value'5' >5</option>");
		$("#percentReturn").append("<option value'6'>6</option>");
	}
}



function calculateReturn(){
	var amount = parseInt($('#amountRange').val());
	var percentReturn = parseInt($("#percentReturn").val());
	var plus = (amount/100) * percentReturn;
	if ($('#cbEnsure').is(':checked')) {
		amount += 20;
	}
	$("#returnAmount").text(amount + plus);

}

function sendToApi(){
			var xml = "<xml>" +
						"<contractId>1</contractId>" +
						"<fullAmount>"+$("#returnAmount").text()+"</fullAmount>"+
						"<amountPaid>0</amountPaid>"+
						"<currency>€</currency>"+
						"<isEnsured>"+$('#cbEnsure').is(':checked')+"</isEnsured>"+
						"<months>"+$('#monthRange').val()+"</months>"+
						"<monthsLeft>"+$('#monthRange').val()+"</monthsLeft>"+
						"<owner>1</owner>"+
						"<taker>2</taker>"+
						"</xml>";
						console.log(xml);
			var data1 = {
				'name': 'Loan',
				'data': xml,
				'code': 'kbm',
				'companyId': '3',
				'collection': '5'				
			}
			     $.ajax 
                     ({ 
                     type: "POST", 
                     url: "https://valus.one/app/valusWeb/services/addItem.php", 
                     data: data1, 
                     cache: false, 
                     success: function(data) 
                       { 
							
                         } 
                    }); 
					
			setTimeout(function(){
				window.location.href="main.html";
			},1000);

		}
</script>
  </body>

</html>